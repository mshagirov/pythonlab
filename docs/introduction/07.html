<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Scope | Python Lab</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Scope" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Let‚Äôs run the following code and observe what happens." />
<meta property="og:description" content="Let‚Äôs run the following code and observe what happens." />
<link rel="canonical" href="https://mshagirov.github.io/pythonlab/pythonlab/introduction/07" />
<meta property="og:url" content="https://mshagirov.github.io/pythonlab/pythonlab/introduction/07" />
<meta property="og:site_name" content="Python Lab" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-11-01T13:08:30+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Scope" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-11-01T13:08:30+08:00","datePublished":"2025-11-01T13:08:30+08:00","description":"Let‚Äôs run the following code and observe what happens.","headline":"Scope","mainEntityOfPage":{"@type":"WebPage","@id":"https://mshagirov.github.io/pythonlab/pythonlab/introduction/07"},"url":"https://mshagirov.github.io/pythonlab/pythonlab/introduction/07"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/pythonlab/assets/main.css">
  <!-- <link rel="shortcut icon" type="image/png" href="/favicon.png"> -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üêç</text></svg>">
  <!-- PyScript CSS -->
  <link rel="stylesheet" href="https://pyscript.net/releases/2025.2.3/core.css">
  <!-- This script tag bootstraps PyScript -->
  <script type="module" src="https://pyscript.net/releases/2025.2.3/core.js"></script><link type="application/atom+xml" rel="alternate" href="https://mshagirov.github.io/pythonlab/pythonlab/feed.xml" title="Python Lab" /><!---->

</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/pythonlab/">Python Lab</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Scope</h1>
  </header>

  <div class="post-content">
    <p>Let‚Äôs run the following code and observe what happens.</p>

<div class="language-python highlighter-rouge">
<pre class="highlight"><script type="py-editor" worker="">
def fun1():
    x = 5
    print(f"x = {x} fun1")

def fun2():
    print(f"x = {x} fun2")

x = 42

print(f"x = {x} before")
fun1()
print(f"x = {x} after")

print('-'*10) # prints dashes '-'

print(f"x = {x} before")
fun2()
print(f"x = {x} after")
</script></pre></div>

<p>You must be wondering, why is the value of <code class="language-plaintext highlighter-rouge">x</code> different in these two functions,
and why we could not update the value inside <code class="language-plaintext highlighter-rouge">fun1</code>.</p>

<p>This is all due to variable‚Äôs <em>scope</em>. Scope defines where the variable is
accessible or ‚Äúvisible‚Äù and where we can update it.</p>

<h3 id="global-vs-local-scope">Global vs Local Scope</h3>

<p>If the variable is accessible from all parts of our program we say that it is
in the <em>global scope</em> and the variable is a <em>global variable</em>.</p>

<p>Above, we set <code class="language-plaintext highlighter-rouge">x=42</code> in the global scope and all parts of your code (e.g., <code class="language-plaintext highlighter-rouge">fun1</code>
and <code class="language-plaintext highlighter-rouge">fun2</code>) can access this variable. That is why the value of <code class="language-plaintext highlighter-rouge">x</code> is 42 inside the
<code class="language-plaintext highlighter-rouge">fun2</code> function.</p>

<p>On the other hand, <code class="language-plaintext highlighter-rouge">fun1</code> defined <code class="language-plaintext highlighter-rouge">x</code> internally as a <em>local variable</em> in its
own <em>local scope</em>. Only <code class="language-plaintext highlighter-rouge">fun1</code> is able to access this local variable. Once you
define (or re-define) a variable inside a local scope that variable is declared
as a local variable.</p>

<ul>
  <li>Try reversing order of <code class="language-plaintext highlighter-rouge">x = 5</code> and the <code class="language-plaintext highlighter-rouge">print</code> statement inside <code class="language-plaintext highlighter-rouge">fun1</code>. You
will get an error, as <code class="language-plaintext highlighter-rouge">print</code> is trying to access yet undefined local <code class="language-plaintext highlighter-rouge">x</code>.</li>
</ul>

<blockquote>
  <p>Every function has its own local scope, also known as a <strong>function scope</strong>. Scope
is what makes functions and other objects in Python reusable blocks of code.
Think about this for a moment. What happens if functions didn‚Äôt have local scope?
Every variable would have to have a unique name.<br /><br />
If that was the case, you would have to make sure your function doesn‚Äôt use the same
variable name inside it. It might be possible for small amount of code, but if you
are working with multiple modules and libraries with tens of thousands of lines of
code, things will quickly get out of hand. A variable naming nightmare!</p>
</blockquote>

<h3 id="nested-functions">Nested Functions</h3>

<p>Scope also applies to functions. If you define a <em>nested function</em>, a function defined
inside another function, only the enclosing (function) scope has access to this nested
function. Let‚Äôs see it in an example.</p>

<div class="language-python highlighter-rouge">
<pre class="highlight"><script type="py-editor" worker="">
def set_temperature(value):
    def fahrenheit():
        return value * 9/5 + 32

    def format(t, symbol):
        return f"{t}¬∞{symbol}"

    T_C = format(value, "C")
    T_F = format(fahrenheit(), "F")

    print(f"Temperature is set to {T_C} ({T_F})")

set_temperature(25)
set_temperature(0)
set_temperature(-5)
</script></pre></div>

<p>Notes on nested functions:</p>

<ul>
  <li>Nested function <code class="language-plaintext highlighter-rouge">fahrenheit</code> has access to the enclosing scope of <code class="language-plaintext highlighter-rouge">set_temperature</code>
function. See how <code class="language-plaintext highlighter-rouge">value</code> is used from within the <code class="language-plaintext highlighter-rouge">fahrenheit</code>.</li>
  <li>The nested functions can be accessed only within the enclosing scope of the
function <code class="language-plaintext highlighter-rouge">set_temperature</code>.</li>
</ul>

<h3 id="updating-variables-outside-the-scope">Updating Variables Outside the Scope</h3>

<p>In some cases you might want to access and update a global variable from inside a
function scope. Python supports this functionality via <code class="language-plaintext highlighter-rouge">global</code> keyword. Let‚Äôs
modify <code class="language-plaintext highlighter-rouge">fun1</code> from above so that it is able to update global <code class="language-plaintext highlighter-rouge">x</code>.</p>

<div class="language-python highlighter-rouge">
<pre class="highlight"><script type="py-editor" worker="">
def fun1():
    global x
    x = 5
    print(f"x = {x} inside fun1")

x = 42

print(f"x = {x} before")
fun1() # this call updates x
print(f"x = {x} after")
</script></pre></div>

<p>Here <code class="language-plaintext highlighter-rouge">global x</code> declares <code class="language-plaintext highlighter-rouge">x</code> as a global variable and <code class="language-plaintext highlighter-rouge">fun1</code> does not create a new
local variable and instead uses <code class="language-plaintext highlighter-rouge">x</code> from the global scope.</p>

<p>This might be unsafe in most of the cases as you are updating what all of your code
can access. You might end up <em>mutating</em> variables that you did not intend to update.</p>

<p>For cases when you don‚Äôt need to update a global variable but still need access
to a higher level variable, Python provides <code class="language-plaintext highlighter-rouge">nonlocal</code> keyword. You can update
enclosing scope variables by declaring them as <code class="language-plaintext highlighter-rouge">nonlocal</code>, e.g., you can update
an enclosing function‚Äôs variable from inside a nested function.</p>

<p>This is useful for cases when you need a function with a state or memory. For
instance, you want to keep track of time inside you simulation.
To do this, you could use a nested function with <code class="language-plaintext highlighter-rouge">nonlocal</code> variable as shown
in the code below.</p>

<div class="language-python highlighter-rouge">
<pre class="highlight"><script type="py-editor" worker="">
def get_timer(start=0):
    t = start # keep track of time

    def step():
        nonlocal t
        t = t + 0.25 # update time
        return t

    return step

timer = get_timer()
print("simulation starting; t=", 0)

t_sec = timer()
print("simulation step 1: t=", t_sec)
t_sec = timer()
print("simulation step 2: t=", t_sec)
t_sec = timer()
print("simulation step 3: t=", t_sec)
</script></pre></div>

<p>The <code class="language-plaintext highlighter-rouge">t</code> variable updates with every call of the <code class="language-plaintext highlighter-rouge">timer</code> function. E.g., you could
feed the <code class="language-plaintext highlighter-rouge">timer</code> as an input to another function and keep updating <code class="language-plaintext highlighter-rouge">t</code>.
The state of the function <code class="language-plaintext highlighter-rouge">timer</code> can‚Äôt be updated from outside except by calling
it and this protects <code class="language-plaintext highlighter-rouge">t</code> from unintendent modifications.</p>

<h3 id="exercises">Exercises</h3>

<hr />

<p><strong>E1:</strong> Timer with Customisable Step Size</p>

<ul>
  <li>Modify the code below to allow for a customisable step size <code class="language-plaintext highlighter-rouge">delta</code> when creating
<code class="language-plaintext highlighter-rouge">timer</code>. Replace the fixed <code class="language-plaintext highlighter-rouge">0.25</code> in the update step with <code class="language-plaintext highlighter-rouge">delta</code>. Use <code class="language-plaintext highlighter-rouge">1</code> as
the default value.</li>
  <li>Test your code by running it with different <code class="language-plaintext highlighter-rouge">delta</code> values.</li>
</ul>

<div class="language-python highlighter-rouge">
<pre class="highlight"><script type="py-editor" worker="">
def get_timer( ? ):
    t = start # keep track of time

    def step():
        nonlocal t
        t = ? # update time
        return t

    return step

timer = get_timer(start=5, delta=0.1)
print("simulation starting; t=", 0)

#> Don't edit below
t_sec = timer()
print(f'simulation step 1: t= {t_sec:.2f}')
t_sec = timer()
print(f'simulation step 2: t= {t_sec:.2f}')
t_sec = timer()
print(f'simulation step 3: t= {t_sec:.2f}')
</script></pre></div>

<hr />

<div class="prevnextlinks">
    <a id="previous" href="06">Previous: Functions</a>
    <a id="next" href="08">Next: Containers</a>
</div>
<script src="/pythonlab/assets/js/navigation.js" defer=""></script>


  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/pythonlab/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Python Lab</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Python Lab</li><li><a class="u-email" href="mailto:shagirov(at)nus.edu.sg">shagirov(at)nus.edu.sg</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/mshagirov"><svg class="svg-icon"><use xlink:href="/pythonlab/assets/minima-social-icons.svg#github"></use></svg> <span class="username">mshagirov</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Python workshops and tutorials</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
